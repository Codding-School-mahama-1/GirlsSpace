<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-translate="page.title">stories | GirlsSpace Mahama</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background:radial-gradient(circle,#f705ff71,#ffffff);
      color: #333;
      line-height: 1.6;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    ul {
      list-style: none;
    }

    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* ____ navbar ____ */
    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      background: #ffffff;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      flex-wrap: wrap;
      gap: 12px;
    }

    .nav-logo img {
      width: 60px;
      height: 50px;
      object-fit: contain;
      border-radius: 50%;
    }

    /* ____ hamburger ____ */
    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
      z-index: 1001;
    }

    .hamburger span {
      width: 28px;
      height: 3px;
      background: #374151;
      border-radius: 3px;
      transition: all 0.3s ease;
    }

    .hamburger.active span:nth-child(1) {
      transform: rotate(45deg) translate(6px, 6px);
    }

    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active span:nth-child(3) {
      transform: rotate(-45deg) translate(6px, -6px);
    }

    /* ____ nav links ____ */
    .nav-links {
      display: flex;
      gap: 16px;
      align-items: center;
      font-size: 14px;
    }

    .nav-link {
      position: relative;
      color: #374151;
      font-weight: 500;
      transition: color 0.2s;
    }

    .nav-link:hover {
      color: #ec4899;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -4px;
      left: 50%;
      background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
      transition: all 0.3s ease;
      transform: translateX(-50%);
    }

    .nav-link:hover::after {
      width: 100%;
    }

    .login-btn {
      padding: 6px 14px;
      border: 1.5px solid #c23cb6;
      border-radius: 30px;
      color: #c23cb6;
      font-weight: 600;
      font-size: 13px;
    }

    .login-btn:hover {
      background: #fbe7ff;
    }

    .donate-btn {
      padding: 8px 16px;
      background: linear-gradient(90deg, #ff5f8d, #c23cb6);
      color: white;
      border-radius: 30px;
      font-weight: 600;
      font-size: 13px;
    }

    .donate-btn:hover {
      border: 1px solid #c23cb6;
      box-shadow: 0 1px 10px 3px #c23cb6;
    }

    .nav-search input {
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
      outline: none;
      font-size: 13px;
      width: 130px;
    }

    /* ____ Dropdown ____ */
    .dropdown {
      position: relative;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
      border-radius: 10px;
      min-width: 130px;
      display: none;
      z-index: 1000;
    }

    .dropdown-menu li a {
      display: block;
      padding: 8px 14px;
      color: #374151;
      font-size: 13px;
    }

    .dropdown-menu li a:hover {
      background: #f3e5f8;
      color: #c23cb6;
    }

    .dropdown:hover .dropdown-menu,
    .dropdown.active .dropdown-menu {
      display: block;
    }

    /* ____ Overlay ____ */
    .nav-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      z-index: 999;
    }

    .nav-overlay.active {
      display: block;
    }

    /* Stories Section Styles */
    body {
        box-sizing: border-box;
    }
    
    .text-gradient {
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .story-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .story-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    
    .loading-spinner {
        border: 3px solid #f3f4f6;
        border-top: 3px solid #ec4899;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 16px 24px;
        border-radius: 8px;
        color: white;
        font-weight: 500;
        z-index: 1000;
        transform: translateX(100%);
        transition: transform 0.3s ease;
    }
    
    .toast.show {
        transform: translateX(0);
    }
    
    .toast.success {
        background: linear-gradient(135deg, #10b981, #059669);
    }
    
    .toast.error {
        background: linear-gradient(135deg, #ef4444, #dc2626);
    }

    /* Footer */
    .footer {
      background: #000;
      color: #e2e8f0;
      padding: 3rem 1.5rem 1.5rem;
    }

    .footer-main {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 3rem;
      margin-bottom: 2rem;
    }

    .footer-left {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .footer-logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .footer-logo {
      width: 50px;
      height: 50px;
      object-fit: contain;
      border-radius: 50%;
      border: 2px solid #ec4899;
    }

    .footer-subtitle {
      font-weight: 600;
      color: #d351d3;
      font-size: 1rem;
      margin: 0;
    }

    .footer-desc {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #94a3b8;
      max-width: 360px;
      margin: 0;
    }

    .social-links {
      display: flex;
      gap: 12px;
    }

    .social-btn {
      width: 40px;
      height: 40px;
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 8px;
      color: #cbd5e1;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      font-size: 1.1rem;
    }

    .social-btn:hover {
      background: #334155;
      color: white;
      transform: translateY(-2px);
    }

    .links-title {
      color: white;
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    .links-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .link-item {
      color: #94a3b8;
      font-size: 0.95rem;
      transition: color 0.3s;
    }

    .link-item:hover {
      color: #db78e4;
    }

    .footer-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      flex-wrap: wrap;
      gap: 1rem;
      padding-top: 1.5rem;
      border-top: 1px solid #1e293b;
      font-size: 0.875rem;
      color: #64748b;
    }

    .highlight {
      color: #b740db;
      font-weight: 500;
    }

    .footer-right-info {
      text-align: right;
      line-height: 1.5;
    }

    .footer-right-info p {
      margin: 0.25rem 0;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .hamburger {
        display: flex;
      }

      .nav-links {
        position: fixed;
        top: 0;
        left: -100%;
        width: 280px;
        height: 100vh;
        background: white;
        flex-direction: column;
        padding: 80px 20px 20px;
        gap: 20px;
        box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        transition: left 0.4s ease;
        z-index: 1000;
        overflow-y: auto;
      }

      .nav-links.active {
        left: 0;
      }

      .nav-link, .login-btn, .donate-btn {
        width: 100%;
        text-align: center;
        padding: 10px 0;
        border-bottom: 1px solid #eee;
        color: #374151;
        font-size: 16px;
      }

      .nav-search {
        order: 3;
        width: 100%;
        margin-top: 10px;
      }

      .nav-search input {
        width: 100%;
      }

      .dropdown-menu {
        position: static;
        box-shadow: none;
        border-radius: 0;
        width: 100%;
        display: none;
        background: #f9f7fd;
      }

      .dropdown.active .dropdown-menu {
        display: block;
      }

      .footer-main {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .footer-logo-section,
      .social-links {
        justify-content: center;
      }

      .footer-bottom {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
      }

      .footer-right-info {
        text-align: center;
      }
    }

    @media (min-width: 769px) {
      .navbar {
        padding: 12px 40px;
      }

      .nav-search input {
        width: 160px;
      }
    }
  </style>
</head>

<body>
  <!-- navbar -->
  <nav class="navbar">
    <div class="nav-logo">
      <img src="./img/Girls Space (1) (1).png" alt="GirlsSpace Logo">
    </div>
    <div class="hamburger" id="mobile-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul class="nav-links" id="nav-links">
      <li><a href="./index.html" class="nav-link">Home</a></li>
      <li><a href="./AboutUs.html" class="nav-link">About</a></li>
      <li><a href="#chat.html" class="nav-link">Chat</a></li>
      <li><a href="./stories.html" class="nav-link">Stories</a></li>
      <li><a href="./Learning _Programs.html" class="nav-link">Programs</a></li>
      <li> <a href="#protection" class="nav-link text-gray-700 hover:text-pink-600 px-3 py-2 text-sm font-medium">Protection</a></li>
    
      <li class="dropdown" id="language-dropdown">
        <a href="#" class="nav-link" id="current-language">Languages</a>
        <ul class="dropdown-menu" id="lang-menu">
          <li><a href="#" class="language-option" data-lang="en">English</a></li>
          <li><a href="#" class="language-option" data-lang="ar">Arabic</a></li>
          <li><a href="#" class="language-option" data-lang="sw">Swahili</a></li>
          <li><a href="#" class="language-option" data-lang="fr">French</a></li>
          <li><a href="#" class="language-option" data-lang="rw">Kinyarwanda</a></li>
        </ul>
      </li>

      <li><a href="./login.html" class="login-btn" data-translate="nav.login">Log In</a></li>
      <li><a href="#" class="donate-btn" data-translate="nav.donate">Donate</a></li>
    </ul>

    <div class="nav-search">
      <input type="text" placeholder="Search..." data-translate="nav.search">
    </div>
  </nav>

  <div class="nav-overlay"></div>
 <!-- 
         Stories Section
            -->
  <style>
        body {
            box-sizing: border-box;
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #ec4899, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .story-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .story-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #d65a98;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .toast.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gradient-to-br from-pink-300 to-purple-50">
  <main class="py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <!-- Header Section -->
      <div class="text-center mb-16">
        <h1 id="main-title" class="text-4xl md:text-5xl font-bold text-gray-900 mb-6" data-translate="stories.title">Share Your <span class="text-gradient">Story</span></h1>
        <p id="subtitle" class="text-xl text-gray-600 max-w-3xl mx-auto" data-translate="stories.subtitle">Your voice matters. Share your experiences, inspire others, and connect through the power of storytelling in a safe and supportive environment.</p>
      </div>
     </div><!-- Story Submission Form -->
     <div class="bg-gradient-to-br from-pink-300 to-purple-400 rounded-3xl p-8 text-white shadow-lg sticky top-8">
      <h2 id="form-title" class="text-2xl font-bold mb-6">Share Your Story</h2>
      <form id="story-form" class="space-y-4">
       <div><label for="story-title" class="block text-sm font-medium mb-2">Story Title</label> <input type="text" id="story-title" name="title" required class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none" placeholder="Give your story a meaningful title">
       </div>
       <div><label for="author-name" class="block text-sm font-medium mb-2">Your Name (or Anonymous)</label> <input type="text" id="author-name" name="author" required class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none" placeholder="How would you like to be known?">
       </div>
       <div><label for="story-category" class="block text-sm font-medium mb-2">Story Category</label> <select id="story-category" name="category" required class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none"> <option value="">Choose a category</option> <option value="education">Education &amp; Learning</option> <option value="empowerment">Personal Empowerment</option> <option value="community">Community Support</option> <option value="career">Career &amp; Dreams</option> <option value="health">Health &amp; Wellbeing</option> <option value="other">Other</option> </select>
       </div>
       <div><label for="story-content" class="block text-sm font-medium mb-2">Your Story</label> <textarea id="story-content" name="content" required rows="6" class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none resize-none" placeholder="Share your experience, challenges overcome, lessons learned, or how you've grown. Your story can inspire others..."></textarea>
       </div><button type="submit" id="submit-btn" class="w-full bg-white text-pink-600 font-bold py-3 px-6 rounded-lg hover:bg-pink-50 transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-pink-500"> <span id="submit-text">Share My Story</span>
        <div id="submit-loading" class="loading-spinner mx-auto hidden"></div></button>
      </form>
      <p class="text-pink-100 text-sm mt-4 text-center">Stories are reviewed before being shared to ensure a safe space for everyone.</p>
     </div>
    </div>
   </div>
  </main><!-- Story Modal -->
  <div id="story-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
   <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
    <div class="p-8">
     <div class="flex justify-between items-start mb-6">
      <div>
       <h3 id="modal-title" class="text-2xl font-bold text-gray-900 mb-2"></h3>
       <p id="modal-author" class="text-gray-600"></p>
      </div><button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-2xl">×</button>
     </div>
     <div id="modal-content" class="text-gray-700 leading-relaxed whitespace-pre-line"></div>
    </div>
   </div>
  </div>
  <script>
        // Configuration object
        const defaultConfig = {
            main_title: "Share Your Story",
            subtitle: "Your voice matters. Share your experiences, inspire others, and connect through the power of storytelling in a safe and supportive environment.",
            form_title: "Share Your Story",
            submit_button_text: "Share My Story"
        };

        // Reference stories data
        const referenceStories = {
            amina: {
                title: "Amina's Journey to Teaching",
                author: "Amina",
                content: `Learning English through GirlsSpace has completely transformed my life. When I first arrived as a refugee, I felt isolated and voiceless. The language barrier made everything seem impossible.

But through the English classes at GirlsSpace, I not only learned to communicate but found my confidence. The teachers were patient and understanding, creating a safe space where I could make mistakes and learn.

Now, I can help translate for other girls who are just starting their journey. I've become a bridge between cultures and languages. My dream is to become a teacher myself, to give back to the community that gave me so much hope.

Every day, I see new girls walking through the doors of GirlsSpace, carrying the same fears I once had. And every day, I get to show them that their dreams are possible, just like mine became possible.

Education is the key that unlocks every door. GirlsSpace gave me that key, and now I'm helping others find theirs.`
            },
            fatima: {
                title: "Finding My Voice and Helping Others",
                author: "Fatima",
                content: `The Gender-Based Violence training at GirlsSpace opened my eyes to rights I didn't even know I had. Growing up, I thought certain treatments were just "normal" - that I had to accept them.

Learning about consent, boundaries, and my right to safety was life-changing. But more importantly, the training gave me the tools and courage to speak up - not just for myself, but for others.

I remember the first time I helped another girl recognize that what she was experiencing wasn't okay. Seeing her realize she wasn't alone, that she deserved better, reminded me why this work is so important.

Now I volunteer with the GBV program, helping facilitate workshops and providing peer support. Every girl who walks through our doors carrying shame or fear reminds me of my own journey.

We create a circle of trust where girls can share without judgment. We remind each other that we are strong, that we deserve respect, and that together we can break cycles of violence.

The most powerful thing I learned is that healing happens in community. None of us has to face these challenges alone.`
            }
        };

        let currentStories = [];
        let storyCount = 0;

        // Data SDK handler
        const dataHandler = {
            onDataChanged(data) {
                currentStories = data;
                renderUserStories();
            }
        };

        // Initialize SDKs
        async function initializeApp() {
            // Initialize Data SDK
            const dataResult = await window.dataSdk.init(dataHandler);
            if (!dataResult.isOk) {
                console.error("Failed to initialize data SDK");
                showToast("Failed to load stories", "error");
                return;
            }

            // Initialize Element SDK
            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        document.getElementById('main-title').innerHTML = 
                            (config.main_title || defaultConfig.main_title).replace('Story', '<span class="text-gradient">Story</span>');
                        document.getElementById('subtitle').textContent = 
                            config.subtitle || defaultConfig.subtitle;
                        document.getElementById('form-title').textContent = 
                            config.form_title || defaultConfig.form_title;
                        document.getElementById('submit-text').textContent = 
                            config.submit_button_text || defaultConfig.submit_button_text;
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || "#fdf2f8",
                                set: (value) => {
                                    config.background_color = value;
                                    window.elementSdk.setConfig({ background_color: value });
                                }
                            },
                            {
                                get: () => config.primary_color || "#ec4899",
                                set: (value) => {
                                    config.primary_color = value;
                                    window.elementSdk.setConfig({ primary_color: value });
                                }
                            },
                            {
                                get: () => config.text_color || "#1f2937",
                                set: (value) => {
                                    config.text_color = value;
                                    window.elementSdk.setConfig({ text_color: value });
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: {
                            get: () => config.font_family || "system-ui",
                            set: (value) => {
                                config.font_family = value;
                                window.elementSdk.setConfig({ font_family: value });
                            }
                        },
                        fontSizeable: {
                            get: () => config.font_size || 16,
                            set: (value) => {
                                config.font_size = value;
                                window.elementSdk.setConfig({ font_size: value });
                            }
                        }
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["main_title", config.main_title || defaultConfig.main_title],
                        ["subtitle", config.subtitle || defaultConfig.subtitle],
                        ["form_title", config.form_title || defaultConfig.form_title],
                        ["submit_button_text", config.submit_button_text || defaultConfig.submit_button_text]
                    ])
                });
            }
        }

        // Render user submitted stories
        function renderUserStories() {
            const container = document.getElementById('user-stories');
            const noStoriesMsg = document.getElementById('no-stories');
            
            if (currentStories.length === 0) {
                container.innerHTML = '';
                noStoriesMsg.classList.remove('hidden');
                return;
            }
            
            noStoriesMsg.classList.add('hidden');
            
            // Sort stories by creation date (newest first)
            const sortedStories = [...currentStories].sort((a, b) => 
                new Date(b.created_at) - new Date(a.created_at)
            );
            
            <div class="story-card bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-6">
              <div class="flex items-center mb-4">
                <div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-full flex items-center justify-center text-white font-bold">
                  F
                </div>
                <div class="ml-4">
                  <h3 class="font-semibold text-gray-900" data-translate="stories.fatima.title">Fatima's Hope</h3>
                  <p class="text-sm text-gray-600" data-translate="stories.featuredTag">Featured Story</p>
                </div>
              </div>
              <p class="text-gray-700 leading-relaxed" data-translate="stories.fatima.preview">"The GBV training helped me understand my rights and gave me courage to speak up. Now I help other girls know they're not alone..."</p>
              <button onclick="showFullStory('fatima')" class="text-blue-600 font-medium mt-4 hover:text-blue-800 transition-colors" data-translate="stories.readFull">Read full story →</button>
            </div>
          </div>

          <!-- User Submitted Stories -->
          <div id="user-stories" class="space-y-6">
            <!-- User stories will be populated here -->
          </div>
          
          <div id="no-stories" class="text-center py-8 text-gray-500 hidden">
            <p data-translate="stories.noStories">No community stories yet. Be the first to share your experience!</p>
          </div>
        </div>

        <!-- Story Submission Form -->
        <div class="bg-gradient-to-br from-pink-500 to-purple-600 rounded-3xl p-8 text-white shadow-lg sticky top-8">
          <h2 id="form-title" class="text-2xl font-bold mb-6" data-translate="stories.formTitle">Share Your Story</h2>
          <form id="story-form" class="space-y-4">
            <div>
              <label for="story-title" class="block text-sm font-medium mb-2" data-translate="stories.form.title">Story Title</label>
              <input type="text" id="story-title" name="title" required class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none" data-translate-placeholder="stories.form.titlePlaceholder">
            </div>
            
            <div>
              <label for="author-name" class="block text-sm font-medium mb-2" data-translate="stories.form.author">Your Name (or Anonymous)</label>
              <input type="text" id="author-name" name="author" required class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none" data-translate-placeholder="stories.form.authorPlaceholder">
            </div>
            
            <div>
              <label for="story-category" class="block text-sm font-medium mb-2" data-translate="stories.form.category">Story Category</label>
              <select id="story-category" name="category" required class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none">
                <option value="" data-translate="stories.form.chooseCategory">Choose a category</option>
                <option value="education" data-translate="stories.categories.education">Education & Learning</option>
                <option value="empowerment" data-translate="stories.categories.empowerment">Personal Empowerment</option>
                <option value="community" data-translate="stories.categories.community">Community Support</option>
                <option value="career" data-translate="stories.categories.career">Career & Dreams</option>
                <option value="health" data-translate="stories.categories.health">Health & Wellbeing</option>
                <option value="other" data-translate="stories.categories.other">Other</option>
              </select>
            </div>
            
            <div>
              <label for="story-content" class="block text-sm font-medium mb-2" data-translate="stories.form.content">Your Story</label>
              <textarea id="story-content" name="content" required rows="6" class="w-full px-4 py-3 rounded-lg text-gray-900 border-0 focus:ring-2 focus:ring-pink-300 focus:outline-none resize-none" data-translate-placeholder="stories.form.contentPlaceholder"></textarea>
            </div>
            
            <button type="submit" id="submit-btn" class="w-full bg-white text-pink-600 font-bold py-3 px-6 rounded-lg hover:bg-pink-50 transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-pink-500">
              <span id="submit-text" data-translate="stories.form.submit">Share My Story</span>
              <div id="submit-loading" class="loading-spinner mx-auto hidden"></div>
            </button>
          </form>
          
          <p class="text-pink-100 text-sm mt-4 text-center" data-translate="stories.form.note">Stories are reviewed before being shared to ensure a safe space for everyone.</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Story Modal -->
  <div id="story-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
      <div class="p-8">
        <div class="flex justify-between items-start mb-6">
          <div>
            <h3 id="modal-title" class="text-2xl font-bold text-gray-900 mb-2"></h3>
            <p id="modal-author" class="text-gray-600"></p>
          </div>
          <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-2xl">×</button>
        </div>
        <div id="modal-content" class="text-gray-700 leading-relaxed whitespace-pre-line"></div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="footer-main">
        <div class="footer-left">
          <div class="footer-logo-section">
            <img src="./img/Girls Space (1) (1).png" alt="GirlsSpace Logo" class="footer-logo">
            <p class="footer-subtitle" data-translate="footer.tagline">Empowering Girls, Building Futures</p>
          </div>
          <p class="footer-desc" data-translate="footer.description">
            A safe digital haven where girls in Mahama refugee camp can connect, learn, grow, and thrive.
          </p>
          <div class="social-links">
            <a href="#" class="social-btn"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-btn"><i class="fab fa-twitter"></i></a>
            <a href="#" class="social-btn"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-btn"><i class="fab fa-youtube"></i></a>
          </div>
        </div>

        <div class="footer-links">
          <h4 class="links-title" data-translate="footer.quickLinks">Quick Links</h4>
          <ul class="links-list">
            <li><a href="chat.html" class="link-item" data-translate="footer.joinChat">Join Chat</a></li>
            <li><a href="./stories.html" class="link-item" data-translate="footer.shareStory">Share Story</a></li>
            <li><a href="./Learning_Programs.html" class="link-item" data-translate="footer.programs">Programs</a></li>
          </ul>
        </div>

        <div class="footer-links">
          <h4 class="links-title" data-translate="footer.getHelp">Get Help</h4>
          <ul class="links-list">
            <li><a href="#" class="link-item" data-translate="footer.emergency">Emergency</a></li>
            <li><a href="#" class="link-item" data-translate="footer.support">Support</a></li>
            <li><a href="#" class="link-item" data-translate="footer.report">Report</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="footer-left-info">
          <p data-translate="footer.copyright">© 2025 GirlsSpace Mahama. <span class="highlight">Empowering girls, always.</span></p>
        </div>
        <div class="footer-right-info">
          <p data-translate="footer.languages">Available in: English, Français, Kiswahili, Kinyarwanda, Arabic</p>
          <p data-translate="footer.supporters">Supported by UNHCR, Save The Children, Alight</p>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Language data with complete translations for stories section
    const translations = {
      en: {
        "page.title": "Stories | GirlsSpace Mahama",
        "nav.home": "Home",
        "nav.about": "About",
        "nav.chat": "Chat",
        "nav.stories": "Stories",
        "nav.programs": "Programs",
        "nav.protection": "Protection",
        "nav.login": "Log In",
        "nav.donate": "Donate",
        "nav.search": "Search...",
        "stories.title": "Share Your Story",
        "stories.subtitle": "Your voice matters. Share your experiences, inspire others, and connect through the power of storytelling in a safe and supportive environment.",
        "stories.featured": "Featured Stories",
        "stories.featuredTag": "Featured Story",
        "stories.amina.title": "Amina's Journey",
        "stories.amina.preview": "\"Learning English through GirlsSpace has opened so many doors for me. I can now help translate for other girls and dream of becoming a teacher...\"",
        "stories.fatima.title": "Fatima's Hope",
        "stories.fatima.preview": "\"The GBV training helped me understand my rights and gave me courage to speak up. Now I help other girls know they're not alone...\"",
        "stories.readFull": "Read full story →",
        "stories.noStories": "No community stories yet. Be the first to share your experience!",
        "stories.formTitle": "Share Your Story",
        "stories.form.title": "Story Title",
        "stories.form.titlePlaceholder": "Give your story a meaningful title",
        "stories.form.author": "Your Name (or Anonymous)",
        "stories.form.authorPlaceholder": "How would you like to be known?",
        "stories.form.category": "Story Category",
        "stories.form.chooseCategory": "Choose a category",
        "stories.form.content": "Your Story",
        "stories.form.contentPlaceholder": "Share your experience, challenges overcome, lessons learned, or how you've grown. Your story can inspire others...",
        "stories.form.submit": "Share My Story",
        "stories.form.note": "Stories are reviewed before being shared to ensure a safe space for everyone.",
        "stories.categories.education": "Education & Learning",
        "stories.categories.empowerment": "Personal Empowerment",
        "stories.categories.community": "Community Support",
        "stories.categories.career": "Career & Dreams",
        "stories.categories.health": "Health & Wellbeing",
        "stories.categories.other": "Other",
        "footer.tagline": "Empowering Girls, Building Futures",
        "footer.description": "A safe digital haven where girls in Mahama refugee camp can connect, learn, grow, and thrive.",
        "footer.quickLinks": "Quick Links",
        "footer.joinChat": "Join Chat",
        "footer.shareStory": "Share Story",
        "footer.programs": "Programs",
        "footer.getHelp": "Get Help",
        "footer.emergency": "Emergency",
        "footer.support": "Support",
        "footer.report": "Report",
        "footer.copyright": "© 2025 GirlsSpace Mahama. Empowering girls, always.",
        "footer.languages": "Available in: English, Français, Kiswahili, Kinyarwanda, Arabic",
        "footer.supporters": "Supported by UNHCR, Save The Children, Alight"
      },
      ar: {
        "page.title": "القصص | GirlsSpace Mahama",
        "nav.home": "الرئيسية",
        "nav.about": "من نحن",
        "nav.chat": "الدردشة",
        "nav.stories": "القصص",
        "nav.programs": "البرامج",
        "nav.protection": "الحماية",
        "nav.login": "تسجيل الدخول",
        "nav.donate": "تبرع",
        "nav.search": "بحث...",
        "stories.title": "شارك قصتك",
        "stories.subtitle": "صوتك مهم. شارك تجاربك، ألهم الآخرين، وتواصل من خلال قوة سرد القصص في بيئة آمنة وداعمة.",
        "stories.featured": "القصص المميزة",
        "stories.featuredTag": "قصة مميزة",
        "stories.amina.title": "رحلة أمينة",
        "stories.amina.preview": "\"فتح تعلم اللغة الإنجليزية من خلال GirlsSpace العديد من الأبواب أمامي. يمكنني الآن المساعدة في الترجمة للفتيات الأخريات وأحلم بأن أصبح معلمة...\"",
        "stories.fatima.title": "أمل فاطمة",
        "stories.fatima.preview": "\"ساعدني تدريب العنف القائم على النوع الاجتماعي في فهم حقوقي وأعطاني الشجاعة للتحدث. الآن أساعد الفتيات الأخريات ليعرفن أنهن لسن وحيدات...\"",
        "stories.readFull": "اقرأ القصة كاملة →",
        "stories.noStories": "لا توجد قصص مجتمعية بعد. كن أول من يشارك تجربته!",
        "stories.formTitle": "شارك قصتك",
        "stories.form.title": "عنوان القصة",
        "stories.form.titlePlaceholder": "أعط قصتك عنوانًا ذا معنى",
        "stories.form.author": "اسمك (أو مجهول)",
        "stories.form.authorPlaceholder": "كيف تريد أن يُعرف عنك؟",
        "stories.form.category": "فئة القصة",
        "stories.form.chooseCategory": "اختر فئة",
        "stories.form.content": "قصتك",
        "stories.form.contentPlaceholder": "شارك تجربتك، التحديات التي تغلبت عليها، الدروس المستفادة، أو كيف تطورت. قصتك يمكن أن تلهم الآخرين...",
        "stories.form.submit": "شارك قصتي",
        "stories.form.note": "يتم مراجعة القصص قبل مشاركتها لضمان مساحة آمنة للجميع.",
        "stories.categories.education": "التعلم والتعليم",
        "stories.categories.empowerment": "التمكين الشخصي",
        "stories.categories.community": "الدعم المجتمعي",
        "stories.categories.career": "المسيرة المهنية والأحلام",
        "stories.categories.health": "الصحة والعافية",
        "stories.categories.other": "أخرى",
        "footer.tagline": "تمكين الفتيات، بناء المستقبل",
        "footer.description": "ملاذ رقمي آمن حيث يمكن للفتيات في مخيم مهاجمة للاجئين التواصل والتعلم والنمو والازدهار.",
        "footer.quickLinks": "روابط سريعة",
        "footer.joinChat": "انضم للدردشة",
        "footer.shareStory": "شارك قصة",
        "footer.programs": "البرامج",
        "footer.getHelp": "احصل على المساعدة",
        "footer.emergency": "طوارئ",
        "footer.support": "الدعم",
        "footer.report": "الإبلاغ",
        "footer.copyright": "© 2025 GirlsSpace Mahama. تمكين الفتيات، دائمًا.",
        "footer.languages": "متاح بـ: العربية، الإنجليزية، الفرنسية، السواحيلية، الكينيارواندية",
        "footer.supporters": "بدعم من: UNHCR، Save The Children، Alight"
      },
      sw: {
        "page.title": "Hadithi | GirlsSpace Mahama",
        "nav.home": "Nyumbani",
        "nav.about": "Kuhusu Sisi",
        "nav.chat": "Gumzo",
        "nav.stories": "Hadithi",
        "nav.programs": "Mipango",
        "nav.protection": "Ulinzi",
        "nav.login": "Ingia",
        "nav.donate": "Changia",
        "nav.search": "Tafuta...",
        "stories.title": "Shiriki Hadithi Yako",
        "stories.subtitle": "Sauti yako ni muhimu. Shiriki uzoefu wako, vutia wengine, na uunganishe kupitia nguvu ya hadithi katika mazingira salama na ya kusaidia.",
        "stories.featured": "Hadithi Zilizokaguliwa",
        "stories.featuredTag": "Hadithi Iliyokaguliwa",
        "stories.amina.title": "Safari ya Amina",
        "stories.amina.preview": "\"Kujifunza Kiingereza kupitia GirlsSpace kumenifungua milango mingi. Sasa naweza kusaidia kutafsiri kwa wasichana wengine na kuota kuwa mwalimu...\"",
        "stories.fatima.title": "Matumaini ya Fatima",
        "stories.fatima.preview": "\"Mafunzo ya GBV yalinisaidia kuelewa haki zangu na kunipa ujasiri wa kusema. Sasa namsaidia wasichana wengine wajue hawako peke yao...\"",
        "stories.readFull": "Soma hadithi kamili →",
        "stories.noStories": "Bado hakuna hadithi za jamii. Kuwa wa kwanza kushiriki uzoefu wako!",
        "stories.formTitle": "Shiriki Hadithi Yako",
        "stories.form.title": "Kichwa cha Hadithi",
        "stories.form.titlePlaceholder": "Pa hadithi yako kichwa chenye maana",
        "stories.form.author": "Jina Lako (au Bila Kujulikana)",
        "stories.form.authorPlaceholder": "Ungependa kujulikana vipi?",
        "stories.form.category": "Aina ya Hadithi",
        "stories.form.chooseCategory": "Chagua aina",
        "stories.form.content": "Hadithi Yako",
        "stories.form.contentPlaceholder": "Shiriki uzoefu wako, changamoto ulizoshinda, masomo uliyojifunza, au jinsi ulivyokua. Hadithi yako inaweza kuwatia moyo wengine...",
        "stories.form.submit": "Shiriki Hadithi Yangu",
        "stories.form.note": "Hadithi hukaguliwa kabla ya kushirikiwa kuhakikisha nafasi salama kwa wote.",
        "stories.categories.education": "Elimu na Kujifunza",
        "stories.categories.empowerment": "Kuwaweka Wenyewe",
        "stories.categories.community": "Msaada wa Jamii",
        "stories.categories.career": "Kazi na Ndoto",
        "stories.categories.health": "Afya na Ustawi",
        "stories.categories.other": "Nyingine",
        "footer.tagline": "Kuwawezesha Wasichana, Kujenga Mustakabali",
        "footer.description": "Kimbilio la salama la kidijitali ambapo wasichana katika kambi ya wakimbizi ya Mahama wanaweza kuungana, kujifunza, kukua, na kustawi.",
        "footer.quickLinks": "Viungo Vya Haraka",
        "footer.joinChat": "Jiunge na Gumzo",
        "footer.shareStory": "Shiriki Hadithi",
        "footer.programs": "Mipango",
        "footer.getHelp": "Pata Msaada",
        "footer.emergency": "Dharura",
        "footer.support": "Msaada",
        "footer.report": "Ripoti",
        "footer.copyright": "© 2025 GirlsSpace Mahama. Kuwawezesha wasichana, kila wakati.",
        "footer.languages": "Inapatikana katika: Kiingereza, Kifaransa, Kiswahili, Kinyarwanda, Kiarabu",
        "footer.supporters": "Inasaidiwa na: UNHCR, Save The Children, Alight"
      },
      fr: {
        "page.title": "Histoires | GirlsSpace Mahama",
        "nav.home": "Accueil",
        "nav.about": "À propos",
        "nav.chat": "Chat",
        "nav.stories": "Histoires",
        "nav.programs": "Programmes",
        "nav.protection": "Protection",
        "nav.login": "Connexion",
        "nav.donate": "Faire un don",
        "nav.search": "Rechercher...",
        "stories.title": "Partagez Votre Histoire",
        "stories.subtitle": "Votre voix compte. Partagez vos expériences, inspirez les autres et connectez-vous grâce à la puissance de la narration dans un environnement sûr et favorable.",
        "stories.featured": "Histoires en Vedette",
        "stories.featuredTag": "Histoire en Vedette",
        "stories.amina.title": "Le Parcours d'Amina",
        "stories.amina.preview": "\"Apprendre l'anglais grâce à GirlsSpace m'a ouvert de nombreuses portes. Je peux maintenant aider à traduire pour d'autres filles et rêver de devenir enseignante...\"",
        "stories.fatima.title": "L'Espoir de Fatima",
        "stories.fatima.preview": "\"La formation sur les VBG m'a aidée à comprendre mes droits et m'a donné le courage de m'exprimer. Maintenant, j'aide les autres filles à savoir qu'elles ne sont pas seules...\"",
        "stories.readFull": "Lire l'histoire complète →",
        "stories.noStories": "Aucune histoire communautaire pour le moment. Soyez le premier à partager votre expérience!",
        "stories.formTitle": "Partagez Votre Histoire",
        "stories.form.title": "Titre de l'Histoire",
        "stories.form.titlePlaceholder": "Donnez un titre significatif à votre histoire",
        "stories.form.author": "Votre Nom (ou Anonyme)",
        "stories.form.authorPlaceholder": "Comment souhaitez-vous être connu?",
        "stories.form.category": "Catégorie de l'Histoire",
        "stories.form.chooseCategory": "Choisissez une catégorie",
        "stories.form.content": "Votre Histoire",
        "stories.form.contentPlaceholder": "Partagez votre expérience, les défis surmontés, les leçons apprises ou comment vous avez grandi. Votre histoire peut inspirer les autres...",
        "stories.form.submit": "Partager Mon Histoire",
        "stories.form.note": "Les histoires sont revues avant d'être partagées pour assurer un espace sûr pour tous.",
        "stories.categories.education": "Éducation et Apprentissage",
        "stories.categories.empowerment": "Autonomisation Personnelle",
        "stories.categories.community": "Soutien Communautaire",
        "stories.categories.career": "Carrière et Rêves",
        "stories.categories.health": "Santé et Bien-être",
        "stories.categories.other": "Autre",
        "footer.tagline": "Autonomiser les Filles, Bâtir l'Avenir",
        "footer.description": "Un havre numérique sûr où les filles du camp de réfugiés de Mahama peuvent se connecter, apprendre, grandir et s'épanouir.",
        "footer.quickLinks": "Liens Rapides",
        "footer.joinChat": "Rejoindre le Chat",
        "footer.shareStory": "Partager une Histoire",
        "footer.programs": "Programmes",
        "footer.getHelp": "Obtenir de l'Aide",
        "footer.emergency": "Urgence",
        "footer.support": "Soutien",
        "footer.report": "Signaler",
        "footer.copyright": "© 2025 GirlsSpace Mahama. Autonomiser les filles, toujours.",
        "footer.languages": "Disponible en : Anglais, Français, Swahili, Kinyarwanda, Arabe",
        "footer.supporters": "Soutenu par : HCR, Save The Children, Alight"
      },
      rw: {
        "page.title": "Inkuru | GirlsSpace Mahama",
        "nav.home": "Ahabanza",
        "nav.about": "Abo turi",
        "nav.chat": "Kuganira",
        "nav.stories": "Inkuru",
        "nav.programs": "Porogaramu",
        "nav.protection": "Umutekano",
        "nav.login": "Injira",
        "nav.donate": "Tanga",
        "nav.search": "Shaka...",
        "stories.title": "Sangiza Inkuru Yawe",
        "stories.subtitle": "Ijwi ryawe rirahari. Sangiza ibigeragezo byawe, kurarikira abandi, no guhuza binyuze ku ngufu z'ikuvuga inkuru mu mwanya utekanye n'ushyigikira.",
        "stories.featured": "Inkuru Zerekwa",
        "stories.featuredTag": "Inkuru Yerekwa",
        "stories.amina.title": "Urugendo rwa Amina",
        "stories.amina.preview": "\"Kwiga Icyongereza binyuze muri GirlsSpace byanze amarembo menshi. Noneho nshobora gutabara mu guhuriza abakobwa bandi kandi nshoreka kuba umwarimu...\"",
        "stories.fatima.title": "Icyizere cya Fatima",
        "stories.fatima.preview": "\"Amahugurwa ya GBV yampaye gusobanukirwa uburenganzira bwanjye kandi yangiye imbaraga zo kuvuga. Noneho mfasha abakobwa bandi kumenya ko badasanzwe...\"",
        "stories.readFull": "Soma inkuru yuzuye →",
        "stories.noStories": "Nta makuru y'umuryango ubu. Ba wa mbere gusangiza uburambe bwawe!",
        "stories.formTitle": "Sangiza Inkuru Yawe",
        "stories.form.title": "Umutwe w'Inkuru",
        "stories.form.titlePlaceholder": "Ha inkuru yawe umutwe ufite inshinga",
        "stories.form.author": "Izina ryawe (cyangwa Utazwi)",
        "stories.form.authorPlaceholder": "Ushaka kumenekana gute?",
        "stories.form.category": "Ubwoko bw'Inkuru",
        "stories.form.chooseCategory": "Hitamo ubwoko",
        "stories.form.content": "Inkuru Yawe",
        "stories.form.contentPlaceholder": "Sangiza uburambe bwawe, ingorane washinduye, amasomo wize, cyangwa uko wakuze. Inkuru yawe ishobora kurarikira abandi...",
        "stories.form.submit": "Sangiza Inkuru Yanjye",
        "stories.form.note": "Inkuru zisuzumwa mbere yo gusangizwa kugirango zimurike umwanya utekanye kuri bose.",
        "stories.categories.education": "Amasomo no Kwiga",
        "stories.categories.empowerment": "Guharanira Umuntu",
        "stories.categories.community": "Gushigikira Umuryango",
        "stories.categories.career": "Akazi n'Inzozi",
        "stories.categories.health": "Ubuzima n'Ubwiza",
        "stories.categories.other": "Ikind",
        "footer.tagline": "Guharanira abakobwa, Kubaka Ejo Hazaza",
        "footer.description": "Ubuturo butekanye bwa digitale aho abakobwa bo mu rugo rw'abimukanyi rwa Mahama bashobora kwihuza, kwiga, gukura, no kongera ubuzima.",
        "footer.quickLinks": "Amahuza Yihuse",
        "footer.joinChat": "Injira mu kuganira",
        "footer.shareStory": "Sangiza inkuru",
        "footer.programs": "Porogaramu",
        "footer.getHelp": "Kwakira ubufasha",
        "footer.emergency": "Ubutabazi",
        "footer.support": "Gushigikira",
        "footer.report": "Raporo",
        "footer.copyright": "© 2025 GirlsSpace Mahama. Guharanira abakobwa, buri gihe.",
        "footer.languages": "Biboneka mu: Icyongereza, Igifaransa, Igiswahili, Ikinyarwanda, Icyarabu",
        "footer.supporters": "Bishigikijwe na: UNHCR, Save The Children, Alight"
      }
    };

    // Language management functions
    function getCurrentLanguage() {
      return localStorage.getItem('selectedLanguage') || 'en';
    }

    function setCurrentLanguage(lang) {
      localStorage.setItem('selectedLanguage', lang);
      applyTranslations(lang);
      updateLanguageSelector(lang);
      updatePageDirection(lang);
    }

    function applyTranslations(lang) {
      const elements = document.querySelectorAll('[data-translate]');
      
      elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
          if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            element.placeholder = translations[lang][key];
          } else {
            element.innerHTML = translations[lang][key];
          }
        }
      });

      // Handle placeholder translations
      const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
      placeholderElements.forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[lang] && translations[lang][key]) {
          element.placeholder = translations[lang][key];
        }
      });

      // Update page title
      document.title = translations[lang]["page.title"] || "Stories | GirlsSpace Mahama";
    }

    function updateLanguageSelector(lang) {
      const languageNames = {
        'en': 'English',
        'ar': 'Arabic',
        'sw': 'Swahili',
        'fr': 'French',
        'rw': 'Kinyarwanda'
      };
      
      const currentLanguageElement = document.getElementById('current-language');
      if (currentLanguageElement) {
        currentLanguageElement.textContent = languageNames[lang];
      }
    }

    function updatePageDirection(lang) {
      // Set direction for RTL languages
      if (lang === 'ar') {
        document.body.style.direction = 'rtl';
        document.body.style.textAlign = 'right';
      } else {
        document.body.style.direction = 'ltr';
        document.body.style.textAlign = 'left';
      }
    }

    // Initialize language on page load
    document.addEventListener('DOMContentLoaded', function() {
      const currentLang = getCurrentLanguage();
      applyTranslations(currentLang);
      updateLanguageSelector(currentLang);
      updatePageDirection(currentLang);
      
      // Add event listeners for language options
      const languageOptions = document.querySelectorAll('.language-option');
      languageOptions.forEach(option => {
        option.addEventListener('click', function(e) {
          e.preventDefault();
          const lang = this.getAttribute('data-lang');
          setCurrentLanguage(lang);
        });
      });
    });

    // Mobile menu functionality
    const mobileMenu = document.getElementById('mobile-menu');
    const navLinks = document.getElementById('nav-links');
    const overlay = document.querySelector('.nav-overlay');
    const dropdown = document.getElementById('language-dropdown');

    mobileMenu.addEventListener('click', () => {
      mobileMenu.classList.toggle('active');
      navLinks.classList.toggle('active');
      overlay.classList.toggle('active');
    });

    overlay.addEventListener('click', () => {
      mobileMenu.classList.remove('active');
      navLinks.classList.remove('active');
      overlay.classList.remove('active');
    });

    if (dropdown) {
      dropdown.addEventListener('click', (e) => {
        if (window.innerWidth <= 768) {
          e.preventDefault();
          dropdown.classList.toggle('active');
        }
      });
    }

    window.addEventListener('resize', () => {
      if (window.innerWidth > 768) {
        navLinks.classList.remove('active');
        mobileMenu.classList.remove('active');
        overlay.classList.remove('active');
        dropdown?.classList.remove('active');
      }
    });

    // Rest of the stories functionality remains the same...
    // [All the existing stories JavaScript code remains unchanged]
  </script>

  <!-- Include the original stories JavaScript functionality -->
  <script>
    // Configuration object
    const defaultConfig = {
        main_title: "Share Your Story",
        subtitle: "Your voice matters. Share your experiences, inspire others, and connect through the power of storytelling in a safe and supportive environment.",
        form_title: "Share Your Story",
        submit_button_text: "Share My Story"
    };

    // Reference stories data
    const referenceStories = {
        amina: {
            title: "Amina's Journey to Teaching",
            author: "Amina",
            content: `Learning English through GirlsSpace has completely transformed my life. When I first arrived as a refugee, I felt isolated and voiceless. The language barrier made everything seem impossible.

But through the English classes at GirlsSpace, I not only learned to communicate but found my confidence. The teachers were patient and understanding, creating a safe space where I could make mistakes and learn.

Now, I can help translate for other girls who are just starting their journey. I've become a bridge between cultures and languages. My dream is to become a teacher myself, to give back to the community that gave me so much hope.

Every day, I see new girls walking through the doors of GirlsSpace, carrying the same fears I once had. And every day, I get to show them that their dreams are possible, just like mine became possible.

Education is the key that unlocks every door. GirlsSpace gave me that key, and now I'm helping others find theirs.`
        },
        fatima: {
            title: "Finding My Voice and Helping Others",
            author: "Fatima",
            content: `The Gender-Based Violence training at GirlsSpace opened my eyes to rights I didn't even know I had. Growing up, I thought certain treatments were just "normal" - that I had to accept them.

Learning about consent, boundaries, and my right to safety was life-changing. But more importantly, the training gave me the tools and courage to speak up - not just for myself, but for others.

I remember the first time I helped another girl recognize that what she was experiencing wasn't okay. Seeing her realize she wasn't alone, that she deserved better, reminded me why this work is so important.

Now I volunteer with the GBV program, helping facilitate workshops and providing peer support. Every girl who walks through our doors carrying shame or fear reminds me of my own journey.

We create a circle of trust where girls can share without judgment. We remind each other that we are strong, that we deserve respect, and that together we can break cycles of violence.

The most powerful thing I learned is that healing happens in community. None of us has to face these challenges alone.`
        }
    };

    let currentStories = [];
    let storyCount = 0;

    // Data SDK handler
    const dataHandler = {
        onDataChanged(data) {
            currentStories = data;
            renderUserStories();
        }
    };

    // Initialize SDKs
    async function initializeApp() {
        // Initialize Data SDK
        const dataResult = await window.dataSdk.init(dataHandler);
        if (!dataResult.isOk) {
            console.error("Failed to initialize data SDK");
            showToast("Failed to load stories", "error");
            return;
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange: async (config) => {
                    document.getElementById('main-title').innerHTML = 
                        (config.main_title || defaultConfig.main_title).replace('Story', '<span class="text-gradient">Story</span>');
                    document.getElementById('subtitle').textContent = 
                        config.subtitle || defaultConfig.subtitle;
                    document.getElementById('form-title').textContent = 
                        config.form_title || defaultConfig.form_title;
                    document.getElementById('submit-text').textContent = 
                        config.submit_button_text || defaultConfig.submit_button_text;
                },
                mapToCapabilities: (config) => ({
                    recolorables: [
                        {
                            get: () => config.background_color || "#fdf2f8",
                            set: (value) => {
                                config.background_color = value;
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        },
                        {
                            get: () => config.primary_color || "#ec4899",
                            set: (value) => {
                                config.primary_color = value;
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        },
                        {
                            get: () => config.text_color || "#1f2937",
                            set: (value) => {
                                config.text_color = value;
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    ],
                    borderables: [],
                    fontEditable: {
                        get: () => config.font_family || "system-ui",
                        set: (value) => {
                            config.font_family = value;
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    },
                    fontSizeable: {
                        get: () => config.font_size || 16,
                        set: (value) => {
                            config.font_size = value;
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["main_title", config.main_title || defaultConfig.main_title],
                    ["subtitle", config.subtitle || defaultConfig.subtitle],
                    ["form_title", config.form_title || defaultConfig.form_title],
                    ["submit_button_text", config.submit_button_text || defaultConfig.submit_button_text]
                ])
            });
        }
    }

    // Render user submitted stories
    function renderUserStories() {
        const container = document.getElementById('user-stories');
        const noStoriesMsg = document.getElementById('no-stories');
        
        if (currentStories.length === 0) {
            container.innerHTML = '';
            noStoriesMsg.classList.remove('hidden');
            return;
        }
        
        noStoriesMsg.classList.add('hidden');
        
        // Sort stories by creation date (newest first)
        const sortedStories = [...currentStories].sort((a, b) => 
            new Date(b.created_at) - new Date(a.created_at)
        );
        
        container.innerHTML = sortedStories.map(story => {
            const initial = story.author_name.charAt(0).toUpperCase();
            const colors = [
                'from-green-400 to-emerald-500',
                'from-orange-400 to-red-500',
                'from-purple-400 to-indigo-500',
                'from-yellow-400 to-orange-500',
                'from-teal-400 to-cyan-500'
            ];
            const colorClass = colors[Math.abs(story.id.split('').reduce((a, b) => a + b.charCodeAt(0), 0)) % colors.length];
            
            const createdDate = new Date(story.created_at);
            const timeAgo = getTimeAgo(createdDate);
            
            return `
                <div class="story-card bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-gradient-to-r ${colorClass} rounded-full flex items-center justify-center text-white font-bold">
                            ${initial}
                        </div>
                        <div class="ml-4">
                            <h3 class="font-semibold text-gray-900">${escapeHtml(story.title)}</h3>
                            <p class="text-sm text-gray-600">${timeAgo} • ${escapeHtml(story.category)}</p>
                        </div>
                    </div>
                    <p class="text-gray-700 leading-relaxed">
                        ${escapeHtml(story.story_content.substring(0, 150))}${story.story_content.length > 150 ? '...' : ''}
                    </p>
                    <button onclick="showUserStory('${story.id}')" class="text-pink-600 font-medium mt-4 hover:text-pink-800 transition-colors">
                        Read full story →
                    </button>
                </div>
            `;
        }).join('');
    }
    // Handle form submission
    document.getElementById('story-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        if (currentStories.length >= 999) {
            showToast("Maximum limit of 999 stories reached. Please contact support.", "error");
            return;
        }
        const submitBtn = document.getElementById('submit-btn');
        const submitText = document.getElementById('submit-text');
        const submitLoading = document.getElementById('submit-loading');
        
        // Show loading state
        submitBtn.disabled = true;
        submitText.classList.add('hidden');
        submitLoading.classList.remove('hidden');
        
        const formData = new FormData(e.target);
        const storyData = {
            id: `story_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
            title: formData.get('title').trim(),
            author_name: formData.get('author').trim(),
            story_content: formData.get('content').trim(),
            category: formData.get('category'),
            created_at: new Date().toISOString(),
            is_approved: true // Auto-approve for demo purposes
        };
        
        try {
            const result = await window.dataSdk.create(storyData);
            
            if (result.isOk) {
                showToast("Your story has been shared successfully!", "success");
                e.target.reset();
            } else {
                showToast("Failed to share your story. Please try again.", "error");
            }
        } catch (error) {
            showToast("An error occurred. Please try again.", "error");
        } finally {
            // Reset button state
            submitBtn.disabled = false;
            submitText.classList.remove('hidden');
            submitLoading.classList.add('hidden');
        }
    });

    // Show full story modal
    function showFullStory(storyKey) {
        const story = referenceStories[storyKey];
        if (story) {
            document.getElementById('modal-title').textContent = story.title;
            document.getElementById('modal-author').textContent = `By ${story.author}`;
            document.getElementById('modal-content').textContent = story.content;
            document.getElementById('story-modal').classList.remove('hidden');
        }
    }

    // Show user story modal
    function showUserStory(storyId) {
        const story = currentStories.find(s => s.id === storyId);
        if (story) {
            document.getElementById('modal-title').textContent = story.title;
            document.getElementById('modal-author').textContent = `By ${story.author_name} • ${story.category}`;
            document.getElementById('modal-content').textContent = story.story_content;
            document.getElementById('story-modal').classList.remove('hidden');
        }
    }

    // Close modal\\\\\\
    function closeModal() {
        document.getElementById('story-modal').classList.add('hidden');
    }

    // Close modal when clicking outside
    document.getElementById('story-modal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeModal();
        }
    });

    // Show toast notification
    function showToast(message, type) {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.textContent = message;
        document.body.appendChild(toast);
        
        setTimeout(() => toast.classList.add('show'), 100);
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => document.body.removeChild(toast), 300);
        }, 3000);
    }

    // Utility functions
    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    function getTimeAgo(date) {
        const now = new Date();
        const diffInSeconds = Math.floor((now - date) / 1000);
        
        if (diffInSeconds < 60) return 'Just now';
        if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)} minutes ago`;
        if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)} hours ago`;
        if (diffInSeconds < 604800) return `${Math.floor(diffInSeconds / 86400)} days ago`;
        return date.toLocaleDateString();
    }

    // Initialize the app
    initializeApp();
  </script>
</body>
</html>